{"ast":null,"code":"import api from './api';\nconst authService = {\n  // Send OTP to mobile number\n  async sendOTP(phoneNumber) {\n    try {\n      const response = await api.post('/auth/partner/send-otp', {\n        phoneNumber\n      });\n      return response.data;\n    } catch (error) {\n      console.error('Error sending OTP:', error);\n      throw error;\n    }\n  },\n  // Verify OTP and check partner status\n  async verifyOTP(phoneNumber, otp) {\n    try {\n      console.log('üîç Verifying OTP for:', phoneNumber);\n      const response = await api.post('/auth/partner/verify-otp', {\n        phoneNumber,\n        otp\n      });\n      console.log('‚úÖ OTP Verification Response:', response.data);\n      console.log('üìã Token in response:', response.data.token ? 'Present' : 'Missing');\n\n      // Store token if received\n      if (response.data.token) {\n        console.log('üíæ Storing token in localStorage...');\n        localStorage.setItem('partnerToken', response.data.token);\n        console.log('‚úÖ Token stored successfully');\n\n        // Verify token was stored\n        const storedToken = localStorage.getItem('partnerToken');\n        console.log('üîç Verification - Token in localStorage:', storedToken ? 'Present' : 'Missing');\n      } else {\n        console.warn('‚ö†Ô∏è No token in response!');\n      }\n      return response.data;\n    } catch (error) {\n      var _error$response;\n      console.error('‚ùå Error verifying OTP:', error);\n      console.error('‚ùå Error response:', (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data);\n      throw error;\n    }\n  },\n  // Check partner status\n  async checkPartnerStatus(phoneNumber) {\n    try {\n      const response = await api.get(`/auth/partner/status/${phoneNumber}`);\n      return response.data;\n    } catch (error) {\n      console.error('Error checking partner status:', error);\n      throw error;\n    }\n  },\n  // Upload documents for new partner\n  async updateProfile(formData) {\n    const response = await axios.put(`${API_URL}/auth/partner/profile`, formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data',\n        'x-auth-token': localStorage.getItem('token')\n      }\n    });\n    return response.data;\n  },\n  async uploadDocuments(formData) {\n    try {\n      const response = await api.post('/auth/partner/upload-documents', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      return response.data;\n    } catch (error) {\n      console.error('Error uploading documents:', error);\n      throw error;\n    }\n  },\n  // Get current partner profile\n  async getPartnerProfile() {\n    try {\n      const response = await api.get('/auth/partner/profile', {\n        headers: {\n          'Authorization': `Bearer ${localStorage.getItem('partnerToken')}`\n        }\n      });\n      return response.data;\n    } catch (error) {\n      console.error('Error fetching profile:', error);\n      throw error;\n    }\n  },\n  // Logout\n  logout() {\n    localStorage.removeItem('partnerToken');\n    window.location.href = '/';\n  },\n  // Check if authenticated\n  isAuthenticated() {\n    return !!localStorage.getItem('partnerToken');\n  }\n};\nexport default authService;","map":{"version":3,"names":["api","authService","sendOTP","phoneNumber","response","post","data","error","console","verifyOTP","otp","log","token","localStorage","setItem","storedToken","getItem","warn","_error$response","checkPartnerStatus","get","updateProfile","formData","axios","put","API_URL","headers","uploadDocuments","getPartnerProfile","logout","removeItem","window","location","href","isAuthenticated"],"sources":["C:/Users/THILOCIGAN/Documents/super_app-main_2/super_app-main/urban-partner-app/src/services/authService.js"],"sourcesContent":["import api from './api';\r\n\r\nconst authService = {\r\n  // Send OTP to mobile number\r\n  async sendOTP(phoneNumber) {\r\n    try {\r\n      const response = await api.post('/auth/partner/send-otp', { phoneNumber });\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('Error sending OTP:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // Verify OTP and check partner status\r\n  async verifyOTP(phoneNumber, otp) {\r\n    try {\r\n      console.log('üîç Verifying OTP for:', phoneNumber);\r\n      const response = await api.post('/auth/partner/verify-otp', { phoneNumber, otp });\r\n\r\n      console.log('‚úÖ OTP Verification Response:', response.data);\r\n      console.log('üìã Token in response:', response.data.token ? 'Present' : 'Missing');\r\n\r\n      // Store token if received\r\n      if (response.data.token) {\r\n        console.log('üíæ Storing token in localStorage...');\r\n        localStorage.setItem('partnerToken', response.data.token);\r\n        console.log('‚úÖ Token stored successfully');\r\n\r\n        // Verify token was stored\r\n        const storedToken = localStorage.getItem('partnerToken');\r\n        console.log('üîç Verification - Token in localStorage:', storedToken ? 'Present' : 'Missing');\r\n      } else {\r\n        console.warn('‚ö†Ô∏è No token in response!');\r\n      }\r\n\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('‚ùå Error verifying OTP:', error);\r\n      console.error('‚ùå Error response:', error.response?.data);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // Check partner status\r\n  async checkPartnerStatus(phoneNumber) {\r\n    try {\r\n      const response = await api.get(`/auth/partner/status/${phoneNumber}`);\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('Error checking partner status:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // Upload documents for new partner\r\n  async updateProfile(formData) {\r\n    const response = await axios.put(`${API_URL}/auth/partner/profile`, formData, {\r\n      headers: {\r\n        'Content-Type': 'multipart/form-data',\r\n        'x-auth-token': localStorage.getItem('token')\r\n      }\r\n    });\r\n    return response.data;\r\n  },\r\n\r\n  async uploadDocuments(formData) {\r\n    try {\r\n      const response = await api.post('/auth/partner/upload-documents', formData, {\r\n        headers: {\r\n          'Content-Type': 'multipart/form-data'\r\n        }\r\n      });\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('Error uploading documents:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // Get current partner profile\r\n  async getPartnerProfile() {\r\n    try {\r\n      const response = await api.get('/auth/partner/profile', {\r\n        headers: {\r\n          'Authorization': `Bearer ${localStorage.getItem('partnerToken')}`\r\n        }\r\n      });\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('Error fetching profile:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // Logout\r\n  logout() {\r\n    localStorage.removeItem('partnerToken');\r\n    window.location.href = '/';\r\n  },\r\n\r\n  // Check if authenticated\r\n  isAuthenticated() {\r\n    return !!localStorage.getItem('partnerToken');\r\n  }\r\n};\r\n\r\nexport default authService;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}