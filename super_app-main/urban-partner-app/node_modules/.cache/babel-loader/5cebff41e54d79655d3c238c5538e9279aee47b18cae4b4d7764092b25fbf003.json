{"ast":null,"code":"import api from './api';\nimport { webSocketService } from './websocket';\nconst partnerService = {\n  // Get available bookings for partners to accept\n  async getAvailableBookings() {\n    try {\n      const token = localStorage.getItem('partnerToken');\n      const response = await api.get('/urban-services/partner/bookings', {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        },\n        params: {\n          type: 'available'\n        }\n      });\n      return response.data;\n    } catch (error) {\n      console.error('Error fetching available bookings:', error);\n      throw error;\n    }\n  },\n  // Get partner's own bookings\n  async getBookings(status = null, page = 1, limit = 10) {\n    try {\n      const token = localStorage.getItem('partnerToken');\n      const params = {\n        page,\n        limit\n      };\n      if (status) params.status = status;\n      const response = await api.get('/urban-services/partner/bookings', {\n        params,\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      return response.data;\n    } catch (error) {\n      console.error('Error fetching partner bookings:', error);\n      throw error;\n    }\n  },\n  // Accept a booking\n  async acceptBooking(bookingId) {\n    try {\n      const token = localStorage.getItem('partnerToken');\n      const response = await api.put(`/urban-services/bookings/${bookingId}/accept`, {}, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      return response.data;\n    } catch (error) {\n      console.error('Error accepting booking:', error);\n      throw error;\n    }\n  },\n  // Reject a booking\n  async rejectBooking(bookingId, reason) {\n    try {\n      const token = localStorage.getItem('partnerToken');\n      const response = await api.put(`/urban-services/bookings/${bookingId}/reject`, {\n        reason\n      }, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      return response.data;\n    } catch (error) {\n      console.error('Error rejecting booking:', error);\n      throw error;\n    }\n  },\n  // Update booking status\n  async updateBookingStatus(bookingId, status, additionalData = {}) {\n    try {\n      const token = localStorage.getItem('partnerToken');\n      const response = await api.put(`/urban-services/bookings/${bookingId}/status`, {\n        status,\n        ...additionalData\n      }, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      return response.data;\n    } catch (error) {\n      console.error('Error updating booking status:', error);\n      throw error;\n    }\n  },\n  // Get partner profile\n  async getProfile() {\n    try {\n      const token = localStorage.getItem('partnerToken');\n      const response = await api.get('/urban-services/partner/profile', {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      return response.data;\n    } catch (error) {\n      console.error('Error fetching partner profile:', error);\n      throw error;\n    }\n  },\n  // Update partner profile\n  async updateProfile(profileData) {\n    try {\n      const token = localStorage.getItem('partnerToken');\n      const response = await api.put('/urban-services/partner/profile', profileData, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      return response.data;\n    } catch (error) {\n      console.error('Error updating partner profile:', error);\n      throw error;\n    }\n  },\n  // Get partner statistics\n  async getStats() {\n    try {\n      const token = localStorage.getItem('partnerToken');\n      const response = await api.get('/urban-services/partner/stats', {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      return response.data;\n    } catch (error) {\n      console.error('Error fetching partner stats:', error);\n      throw error;\n    }\n  },\n  // Get earnings\n  async getEarnings(period = 'month') {\n    try {\n      const token = localStorage.getItem('partnerToken');\n      const response = await api.get(`/urban-services/partner/earnings?period=${period}`, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      return response.data;\n    } catch (error) {\n      console.error('Error fetching earnings:', error);\n      throw error;\n    }\n  },\n  // Update availability status\n  async updateAvailability(isAvailable) {\n    try {\n      const token = localStorage.getItem('partnerToken');\n      const response = await api.put('/urban-services/partner/availability', {\n        isAvailable\n      }, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      return response.data;\n    } catch (error) {\n      console.error('Error updating availability:', error);\n      throw error;\n    }\n  },\n  // Get reviews\n  async getReviews(page = 1, limit = 10) {\n    try {\n      const token = localStorage.getItem('partnerToken');\n      const response = await api.get(`/urban-services/partner/reviews?page=${page}&limit=${limit}`, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      return response.data;\n    } catch (error) {\n      console.error('Error fetching reviews:', error);\n      throw error;\n    }\n  },\n  // WebSocket subscription for real-time updates\n  subscribeToBookings(callback) {\n    const token = localStorage.getItem('partnerToken');\n\n    // Connect with token if not already connected\n    webSocketService.connect('/partner', token);\n\n    // Subscribe to messages\n    const unsubscribe = webSocketService.subscribe(data => {\n      if (data.type === 'NEW_BOOKING' || data.type === 'BOOKING_UPDATED' || data.type === 'BOOKING_CANCELLED') {\n        callback(data);\n      }\n    });\n    return unsubscribe;\n  }\n};\nexport default partnerService;","map":{"version":3,"names":["api","webSocketService","partnerService","getAvailableBookings","token","localStorage","getItem","response","get","headers","params","type","data","error","console","getBookings","status","page","limit","acceptBooking","bookingId","put","rejectBooking","reason","updateBookingStatus","additionalData","getProfile","updateProfile","profileData","getStats","getEarnings","period","updateAvailability","isAvailable","getReviews","subscribeToBookings","callback","connect","unsubscribe","subscribe"],"sources":["C:/Users/THILOCIGAN/Documents/super_app-main_2/super_app-main/urban-partner-app/src/services/partnerService.js"],"sourcesContent":["import api from './api';\r\nimport { webSocketService } from './websocket';\r\n\r\nconst partnerService = {\r\n  // Get available bookings for partners to accept\r\n  async getAvailableBookings() {\r\n    try {\r\n      const token = localStorage.getItem('partnerToken');\r\n      const response = await api.get('/urban-services/partner/bookings', {\r\n        headers: { 'Authorization': `Bearer ${token}` },\r\n        params: { type: 'available' }\r\n      });\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('Error fetching available bookings:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // Get partner's own bookings\r\n  async getBookings(status = null, page = 1, limit = 10) {\r\n    try {\r\n      const token = localStorage.getItem('partnerToken');\r\n      const params = { page, limit };\r\n      if (status) params.status = status;\r\n\r\n      const response = await api.get('/urban-services/partner/bookings', {\r\n        params,\r\n        headers: { 'Authorization': `Bearer ${token}` }\r\n      });\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('Error fetching partner bookings:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // Accept a booking\r\n  async acceptBooking(bookingId) {\r\n    try {\r\n      const token = localStorage.getItem('partnerToken');\r\n      const response = await api.put(`/urban-services/bookings/${bookingId}/accept`, {}, {\r\n        headers: { 'Authorization': `Bearer ${token}` }\r\n      });\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('Error accepting booking:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // Reject a booking\r\n  async rejectBooking(bookingId, reason) {\r\n    try {\r\n      const token = localStorage.getItem('partnerToken');\r\n      const response = await api.put(`/urban-services/bookings/${bookingId}/reject`, { reason }, {\r\n        headers: { 'Authorization': `Bearer ${token}` }\r\n      });\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('Error rejecting booking:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // Update booking status\r\n  async updateBookingStatus(bookingId, status, additionalData = {}) {\r\n    try {\r\n      const token = localStorage.getItem('partnerToken');\r\n      const response = await api.put(`/urban-services/bookings/${bookingId}/status`, {\r\n        status,\r\n        ...additionalData\r\n      }, {\r\n        headers: { 'Authorization': `Bearer ${token}` }\r\n      });\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('Error updating booking status:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // Get partner profile\r\n  async getProfile() {\r\n    try {\r\n      const token = localStorage.getItem('partnerToken');\r\n      const response = await api.get('/urban-services/partner/profile', {\r\n        headers: { 'Authorization': `Bearer ${token}` }\r\n      });\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('Error fetching partner profile:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // Update partner profile\r\n  async updateProfile(profileData) {\r\n    try {\r\n      const token = localStorage.getItem('partnerToken');\r\n      const response = await api.put('/urban-services/partner/profile', profileData, {\r\n        headers: { 'Authorization': `Bearer ${token}` }\r\n      });\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('Error updating partner profile:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // Get partner statistics\r\n  async getStats() {\r\n    try {\r\n      const token = localStorage.getItem('partnerToken');\r\n      const response = await api.get('/urban-services/partner/stats', {\r\n        headers: { 'Authorization': `Bearer ${token}` }\r\n      });\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('Error fetching partner stats:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // Get earnings\r\n  async getEarnings(period = 'month') {\r\n    try {\r\n      const token = localStorage.getItem('partnerToken');\r\n      const response = await api.get(`/urban-services/partner/earnings?period=${period}`, {\r\n        headers: { 'Authorization': `Bearer ${token}` }\r\n      });\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('Error fetching earnings:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // Update availability status\r\n  async updateAvailability(isAvailable) {\r\n    try {\r\n      const token = localStorage.getItem('partnerToken');\r\n      const response = await api.put('/urban-services/partner/availability', {\r\n        isAvailable\r\n      }, {\r\n        headers: { 'Authorization': `Bearer ${token}` }\r\n      });\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('Error updating availability:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // Get reviews\r\n  async getReviews(page = 1, limit = 10) {\r\n    try {\r\n      const token = localStorage.getItem('partnerToken');\r\n      const response = await api.get(`/urban-services/partner/reviews?page=${page}&limit=${limit}`, {\r\n        headers: { 'Authorization': `Bearer ${token}` }\r\n      });\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('Error fetching reviews:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // WebSocket subscription for real-time updates\r\n  subscribeToBookings(callback) {\r\n    const token = localStorage.getItem('partnerToken');\r\n\r\n    // Connect with token if not already connected\r\n    webSocketService.connect('/partner', token);\r\n\r\n    // Subscribe to messages\r\n    const unsubscribe = webSocketService.subscribe((data) => {\r\n      if (data.type === 'NEW_BOOKING' ||\r\n        data.type === 'BOOKING_UPDATED' ||\r\n        data.type === 'BOOKING_CANCELLED') {\r\n        callback(data);\r\n      }\r\n    });\r\n\r\n    return unsubscribe;\r\n  }\r\n};\r\n\r\nexport default partnerService;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}