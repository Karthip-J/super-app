{"ast":null,"code":"import api from'./api';const authService={// Send OTP to mobile number\nasync sendOTP(phoneNumber){try{const response=await api.post('/auth/partner/send-otp',{phoneNumber});return response.data;}catch(error){console.error('Error sending OTP:',error);throw error;}},// Verify OTP and check partner status\nasync verifyOTP(phoneNumber,otp){try{console.log('üîç Verifying OTP for:',phoneNumber);const response=await api.post('/auth/partner/verify-otp',{phoneNumber,otp});console.log('‚úÖ OTP Verification Response:',response.data);console.log('üìã Token in response:',response.data.token?'Present':'Missing');// Store token if received\nif(response.data.token){console.log('üíæ Storing token in localStorage...');localStorage.setItem('partnerToken',response.data.token);console.log('‚úÖ Token stored successfully');// Verify token was stored\nconst storedToken=localStorage.getItem('partnerToken');console.log('üîç Verification - Token in localStorage:',storedToken?'Present':'Missing');}else{console.warn('‚ö†Ô∏è No token in response!');}return response.data;}catch(error){var _error$response;console.error('‚ùå Error verifying OTP:',error);console.error('‚ùå Error response:',(_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.data);throw error;}},// Check partner status\nasync checkPartnerStatus(phoneNumber){try{const response=await api.get(\"/auth/partner/status/\".concat(phoneNumber));return response.data;}catch(error){console.error('Error checking partner status:',error);throw error;}},// Update partner profile\nasync updateProfile(formData){try{const response=await api.put('/auth/partner/profile',formData,{headers:{'Content-Type':'multipart/form-data','Authorization':\"Bearer \".concat(localStorage.getItem('partnerToken'))}});return response.data;}catch(error){console.error('Error updating profile:',error);throw error;}},async uploadDocuments(formData){try{const response=await api.post('/auth/partner/upload-documents',formData,{headers:{'Content-Type':'multipart/form-data'}});return response.data;}catch(error){console.error('Error uploading documents:',error);throw error;}},// Get current partner profile\nasync getPartnerProfile(){try{const response=await api.get('/auth/partner/profile',{headers:{'Authorization':\"Bearer \".concat(localStorage.getItem('partnerToken'))}});return response.data;}catch(error){console.error('Error fetching profile:',error);throw error;}},// Logout\nlogout(){localStorage.removeItem('partnerToken');window.location.href='/';},// Check if authenticated\nisAuthenticated(){return!!localStorage.getItem('partnerToken');}};export default authService;","map":{"version":3,"names":["api","authService","sendOTP","phoneNumber","response","post","data","error","console","verifyOTP","otp","log","token","localStorage","setItem","storedToken","getItem","warn","_error$response","checkPartnerStatus","get","concat","updateProfile","formData","put","headers","uploadDocuments","getPartnerProfile","logout","removeItem","window","location","href","isAuthenticated"],"sources":["C:/Users/THILOCIGAN/Documents/super_app-main_2/super_app-main/urban-partner-app/src/services/authService.js"],"sourcesContent":["import api from './api';\r\n\r\nconst authService = {\r\n  // Send OTP to mobile number\r\n  async sendOTP(phoneNumber) {\r\n    try {\r\n      const response = await api.post('/auth/partner/send-otp', { phoneNumber });\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('Error sending OTP:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // Verify OTP and check partner status\r\n  async verifyOTP(phoneNumber, otp) {\r\n    try {\r\n      console.log('üîç Verifying OTP for:', phoneNumber);\r\n      const response = await api.post('/auth/partner/verify-otp', { phoneNumber, otp });\r\n\r\n      console.log('‚úÖ OTP Verification Response:', response.data);\r\n      console.log('üìã Token in response:', response.data.token ? 'Present' : 'Missing');\r\n\r\n      // Store token if received\r\n      if (response.data.token) {\r\n        console.log('üíæ Storing token in localStorage...');\r\n        localStorage.setItem('partnerToken', response.data.token);\r\n        console.log('‚úÖ Token stored successfully');\r\n\r\n        // Verify token was stored\r\n        const storedToken = localStorage.getItem('partnerToken');\r\n        console.log('üîç Verification - Token in localStorage:', storedToken ? 'Present' : 'Missing');\r\n      } else {\r\n        console.warn('‚ö†Ô∏è No token in response!');\r\n      }\r\n\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('‚ùå Error verifying OTP:', error);\r\n      console.error('‚ùå Error response:', error.response?.data);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // Check partner status\r\n  async checkPartnerStatus(phoneNumber) {\r\n    try {\r\n      const response = await api.get(`/auth/partner/status/${phoneNumber}`);\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('Error checking partner status:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // Update partner profile\r\n  async updateProfile(formData) {\r\n    try {\r\n      const response = await api.put('/auth/partner/profile', formData, {\r\n        headers: {\r\n          'Content-Type': 'multipart/form-data',\r\n          'Authorization': `Bearer ${localStorage.getItem('partnerToken')}`\r\n        }\r\n      });\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('Error updating profile:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  async uploadDocuments(formData) {\r\n    try {\r\n      const response = await api.post('/auth/partner/upload-documents', formData, {\r\n        headers: {\r\n          'Content-Type': 'multipart/form-data'\r\n        }\r\n      });\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('Error uploading documents:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // Get current partner profile\r\n  async getPartnerProfile() {\r\n    try {\r\n      const response = await api.get('/auth/partner/profile', {\r\n        headers: {\r\n          'Authorization': `Bearer ${localStorage.getItem('partnerToken')}`\r\n        }\r\n      });\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('Error fetching profile:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // Logout\r\n  logout() {\r\n    localStorage.removeItem('partnerToken');\r\n    window.location.href = '/';\r\n  },\r\n\r\n  // Check if authenticated\r\n  isAuthenticated() {\r\n    return !!localStorage.getItem('partnerToken');\r\n  }\r\n};\r\n\r\nexport default authService;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}